{"id":"525f43e4-6dca-46ae-beed-2226779c7d07","code":"mail_sender","document_type":"node_type","data":{"code":"mail_sender","name":"Mail Sender","group":"Comunicaciones","react_component_type":"AngieOutputNode","custom_color":true,"component_border_color":"#237a52","component_bg_color":"#ffffff","json_data_schema":"{\n    \"description\": \"Mail Sender\",\n    \"type\": \"object\",\n    \"required\": [\n        \"label\",\n        \"hostname\",\n        \"port\",\n        \"type\",\n        \"contentType\"\n    ],\n    \"properties\": {\n        \"label\": {\n            \"type\": \"string\"\n        },\n        \"type\": {\n            \"title\": \"Tipo\",\n            \"type\": \"string\",\n            \"enum\": [\n                \"smtp\",\n                \"imap\",\n                \"smtps\"\n            ],\n            \"enumNames\": [\n                \"smtp\",\n                \"imap\",\n                \"smtps\"\n            ]\n        },\n        \"hostname\": {\n            \"title\": \"Host\",\n            \"type\": \"string\"\n        },\n        \"port\": {\n            \"title\": \"Puerto\",\n            \"type\": \"string\"\n        },\n        \"contentType\": {\n            \"title\": \"Tipo del mensaje\",\n            \"type\": \"string\",\n            \"enum\": [\n                \"auto\",\n                \"text/html\",\n                \"text/plain\"\n            ],\n            \"enumNames\": [\n                \"Auto\",\n                \"HTML\",\n                \"Texto\"\n            ]\n        },\n        \"query_params\": {\n            \"title\": \"Opciones\",\n            \"type\": \"object\",\n            \"required\": [\n                \"username\",\n                \"password\"\n            ],\n            \"properties\": {\n                \"username\": {\n                    \"title\": \"Usuario\",\n                    \"type\": \"string\"\n                },\n                \"password\": {\n                    \"title\": \"Contrase√±a\",\n                    \"type\": \"string\"\n                },\n                \"from\": {\n                    \"title\": \"Remitente\",\n                    \"type\": \"string\"\n                },\n                \"to\": {\n                    \"title\": \"Destinatario\",\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"cc\": {\n                    \"title\": \"Con copia\",\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"bcc\": {\n                    \"title\": \"Copia oculta\",\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"subject\": {\n                    \"title\": \"Asunto\",\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"message_html\": {\n            \"title\": \"Mensaje\",\n            \"type\": \"string\",\n            \"default\": \"\"\n        },\n        \"message_text\": {\n            \"title\": \"Mensaje\",\n            \"type\": \"string\",\n            \"default\": \"\"\n        },\n        \"attachments\": {\n            \"title\": \"Adjuntos\",\n            \"type\": \"array\",\n            \"required\": [\n                \"attachment\",\n                \"attachment_type\",\n                \"filename\"\n            ],\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"attachment\": {\n                        \"title\": \"Adjunto\",\n                        \"type\": \"string\"\n                    },\n                    \"attachment_type\": {\n                        \"title\": \"Tipo\",\n                        \"type\": \"string\"\n                    },\n                    \"filename\": {\n                        \"title\": \"Nombre fichero\",\n                        \"type\": \"string\"\n                    }\n                }\n            }\n        }\n    }\n}","json_ui_schema":"{\n    \"ui:classNames\": \"row\",\n    \"label\": {\n        \"ui:classNames\": \"col-3\"\n    },\n    \"type\": {\n        \"ui:classNames\": \"col-2\"\n    },\n    \"hostname\": {\n        \"ui:classNames\": \"col-5\"\n    },\n    \"port\": {\n        \"ui:classNames\": \"col-2\"\n    },\n    \"contentType\": {\n        \"ui:classNames\": \"col-3\"\n    },\n    \"query_params\": {\n        \"ui:classNames\": \"row\",\n        \"username\": {\n            \"ui:classNames\": \"col-4\"\n        },\n        \"password\": {\n            \"ui:classNames\": \"col-4\"\n        },\n        \"from\": {\n            \"ui:classNames\": \"col-4\",\n            \"ui:options\": {\n                \"inputType\": \"email\"\n            }\n        },\n        \"to\": {\n            \"ui:classNames\": \"full-width\"\n        },\n        \"cc\": {\n            \"ui:classNames\": \"full-width\"\n        },\n        \"bcc\": {\n            \"ui:classNames\": \"full-width\"\n        },\n        \"subject\": {\n            \"ui:classNames\": \"col-9\"\n        }\n    },\n    \"message_html\": {\n        \"condition\": \"contentType=text/html\",\n        \"ui:classNames\": \"col-12\",\n        \"ui:widget\": \"AceEditorWidget\",\n        \"ui:mode\": \"html\",\n        \"ui:disableValidation\": true,\n        \"ui:beautify\": true,\n        \"ui:height\": 200\n    },\n    \"message_text\": {\n        \"condition\": \"contentType=text/plain\",\n        \"ui:classNames\": \"col-12\",\n        \"ui:widget\": \"AceEditorWidget\",\n        \"ui:mode\": \"text\",\n        \"ui:disableValidation\": true,\n        \"ui:beautify\": true,\n        \"ui:height\": 200\n    },\n    \"attachments\": {\n        \"items\": {\n            \"attachment\": {\n                \"ui:classNames\": \"col-12\",\n                \"ui:widget\": \"AceEditorWidget\",\n                \"ui:disableValidation\": true,\n                \"ui:beautify\": true,\n                \"ui:height\": 200\n            }\n        }\n    }\n}","xml_template":"<route  id=\"{{source}}\">\n    <from uri=\"direct:{{source}}\"/>\n    {{applyUnmarshal input_format input_format_options}}\n{{#if (not_empty attachments)}}\n    <setBody>\n        <groovy>\n<![CDATA[\nimport groovy.json.JsonSlurper;\nimport groovy.json.JsonBuilder;\n\ndef jsonSlurper = new JsonSlurper();\n\ndef parsedDocuments = [:]\ndef counter = 0;\nfor (document in {{groovyList attachments}}) {\n    parsedDocuments[counter++] = document\n}\nparsedDocuments = new JsonBuilder(parsedDocuments).toPrettyString()\n\n{{#if (eq contentType \"text/html\")}}\ndef json = jsonSlurper.parseText \"\"\"{ \"body\": \"{{safe message_html}}\", \"documents\": $parsedDocuments }\"\"\"\n{{/if}}\n{{#if (eq contentType \"text/plain\")}}\ndef json = jsonSlurper.parseText \"\"\"{ \"body\": \"{{safe message_text}}\", \"documents\": $parsedDocuments }\"\"\"\n{{/if}}\n\nreturn [\n    body: json[\"body\"],\n    documents: json[\"documents\"]\n    ]\n]]>\n        </groovy>\n    </setBody>\n    <marshal>\n        <json/>\n    </marshal>\n    <process ref=\"attachments\"/>\n    {{/if}}\n{{#if (ne contentType \"auto\")}}\n    <setHeader name=\"contentType\">\n        <constant>\n            {{contentType}}\n        </constant>\n    </setHeader>\n    {{/if}}\n    <toD uri=\"{{type}}://{{hostname}}:{{port}}{{querystring query_params}}\"/>\n</route>","defaults":"{\n    \"hostname\": \"\",\n    \"port\": \"\",\n    \"contentType\": \"text/html\"\n}","id":"525f43e4-6dca-46ae-beed-2226779c7d07","filename":"mail_sender.json"},"package_code":null,"package_version":null}