{"id":"513f8997-d636-4027-a3ed-bb5b5348c33b","code":"elasticsearch_exception_handled","document_type":"node_type","data":{"code":"elasticsearch_exception_handled","name":"Elasticsearch Exc Handled","group":"Elasticsearch","react_component_type":"MultiTargetNode","json_data_schema":"{\n    \"type\": \"object\",\n    \"required\": [\n        \"instance_name\",\n        \"exceptionToHandle\",\n        \"exceptionHandled\"\n    ],\n    \"properties\": {\n        \"instance_name\": {\n            \"type\": \"string\"\n        },\n        \"indexName\": {\n            \"type\": \"string\"\n        },\n        \"postProcessHitsToString\": {\n            \"title\": \"Post-process Hits a String\",\n            \"type\": \"boolean\",\n            \"default\": false\n        },\n        \"query_params\": {\n            \"title\": \"Opciones\",\n            \"type\": \"object\",\n            \"properties\": {\n                \"operation\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"extra_query_params\": {\n            \"title\": \"Parámetros Extra\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"code\",\n                    \"value\"\n                ],\n                \"properties\": {\n                    \"code\": {\n                        \"title\": \"Clave\",\n                        \"type\": \"string\"\n                    },\n                    \"value\": {\n                        \"title\": \"Valor\",\n                        \"type\": \"string\"\n                    }\n                }\n            }\n        },\n        \"manageException\": {\n            \"title\": \"Manage Exception\",\n            \"type\": \"boolean\",\n            \"default\": false\n        },\n        \"exceptionToHandle\": {\n            \"title\": \"Exception\",\n            \"type\": \"string\"\n        },\n        \"exceptionHandled\": {\n            \"title\": \"Exception handled\",\n            \"type\": \"boolean\",\n            \"default\": false\n        }\n    }\n}","json_ui_schema":"{\n    \"ui:classNames\": \"row\",\n    \"instance_name\": {\n        \"ui:classNames\": \"col-6\",\n        \"ui:help\": \"Nombre de la instancia en la configuración.\"\n    },\n    \"indexName\": {\n        \"ui:classNames\": \"col-6\",\n        \"ui:help\": \"Indice sobre el que realizar la acción.\"\n    },\n    \"postProcessHitsToString\": {\n        \"ui:widget\": \"checkbox\",\n        \"ui:classNames\": \"col-3\",\n        \"ui:help\": \"El resultado de la consulta a Elastic lo convierte de SearchHits a String.\"\n    },\n    \"query_params\": {\n        \"ui:classNames\": \"full-width\",\n        \"operation\": {\n            \"ui:classNames\": \"col-6\",\n            \"ui:help\": \"Elasticsearch camel operation. https://camel.apache.org/components/3.14.x/elasticsearch-rest-component.html#_message_operations\"\n        }\n    },\n    \n    \"extra_query_params\": {\n        \"ui:classNames\": \"full-width\"\n    },\n    \"manageException\": {\n        \"ui:widget\": \"checkbox\",\n        \"ui:classNames\": \"col-2\"\n    },\n    \"exceptionToHandle\": {\n        \"condition\": \"manageException=true\",\n        \"ui:classNames\": \"col-8\"\n    },\n    \"exceptionHandled\": {\n        \"condition\": \"manageException=true\",\n        \"ui:widget\": \"checkbox\",\n        \"ui:classNames\": \"col-2\"\n    }\n}","xml_template":"<route  id=\"{{source}}\">\n    <from uri=\"direct:{{source}}\"/>\n    {{#if (eq manageException true)}}\n    <onException>\n        <exception>\n            {{exceptionToHandle}}\n        </exception>\n        <handled>\n            <constant>{{exceptionHandled}}</constant>\n        </handled>\n        {{generateDestination handles.[1].to}}\n    </onException>\n    {{/if}}\n    <setHeader name=\"ES_NAME\">\n        <constant>\n            {{instance_name}}\n        </constant>\n    </setHeader>\n    {{#if (eq query_params.operation \"Search\")}}\n    <convertBodyTo type=\"String\"/>\n    {{/if}}\n    <toD uri=\"${header.ES_NAME}://elasticsearch?indexName={{indexName}}&amp;{{querystring query_params extra_query_params true}}\"/>\n    {{#if (eq postProcessHitsToString true)}}\n    <process ref=\"elasticSearchHitsToString\"/>\n    {{/if}}\n    {{generateDestination handles.[0].to}}\n</route>","defaults":"{\n    \"query_params\": {\n        \"operation\": \"Search\"\n    },\n    \"instance_name\": \"elasticsearch-custom\",\n    \"handles\": [\n        {\n            \"id\": \"out\",\n            \"to\": \"\",\n            \"title\": \"Out\",\n            \"color\": \"blue\"\n        },\n        {\n            \"id\": \"exception\",\n            \"to\": \"\",\n            \"title\": \"Exception\",\n            \"color\": \"red\"\n        }\n    ]\n}","id":"513f8997-d636-4027-a3ed-bb5b5348c33b","filename":"elasticsearch_exception_handled.json"},"package_code":null,"package_version":null}